version: '2'

services:
  ZOOKEEPER_NAME:
    container_name: ZOOKEEPER_NAME
    image: ${FABRIC_ZOOKEEPER_FIXTURE_IMAGE}:${ARCH}-${FABRIC_ZOOKEEPER_FIXTURE_TAG}
    restart: always
    environment:
      - ZOO_MY_ID=ZOOKEEPER_ID
      - ZOO_SERVERS=server.1=zookeeper0:2888:3888:participant server.2=zookeeper1:2888:3888:participant server.3=zookeeper2:2888:3888:participant
      - ZOO_LOG_DIR=/paic/log
    volumes:
      - /paic_data/ZOOKEEPER_NAME/log:/paic/log
      - /paic_data/ZOOKEEPER_NAME/data:/data
      - /paic_data/ZOOKEEPER_NAME/datalog:/datalog
    ports:
      - 2181:2181
      - 2888:2888
      - 3888:3888
    network_mode: host
    extra_hosts:
      - zookeeper0:zookeeper0_extra_host_ip
      - zookeeper1:zookeeper1_extra_host_ip
      - zookeeper2:zookeeper2_extra_host_ip
      - kafka0:kafka0_extra_host_ip
      - kafka1:kafka1_extra_host_ip
      - kafka2:kafka2_extra_host_ip
